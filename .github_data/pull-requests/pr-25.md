---
type: pull_request
state: closed (merged)
branch: c-vigo/issue1 â†’ dev
created: 2026-01-09T09:45:24Z
updated: 2026-01-09T13:18:59Z
author: c-vigo
author_url: https://github.com/c-vigo
url: https://github.com/vig-os/devcontainer/pull/25
comments: 0
labels: bug
assignees: c-vigo
milestone: 0.3
projects: none
relationship: none
merged: 2026-01-09T13:18:52Z
synced: 2026-01-09T16:17:41.112Z
---

# [PR 25](https://github.com/vig-os/devcontainer/pull/25) Add Just Command Runner and Fix Default Recipe Conflicts

# Pull Request

## Description

This PR adds the `just` command runner (v1.46.0) to the container image and fixes multiple default recipe conflicts in the justfile architecture. It includes comprehensive test coverage for `just` installation and recipe execution.

## Related Issue(s)

Closes #1

## Type of Change

- [x] Bug fix (non-breaking change which fixes an issue)
- [x] New feature (non-breaking change which adds functionality)
- [ ] Breaking change (fix or feature that would cause existing functionality to not work as expected)
- [ ] Documentation update
- [ ] Refactoring (no functional changes)
- [x] Test updates

## Changes Made

### Added
- **Just command runner installation** (v1.46.0)
  - Added `just` installation to Containerfile using official install script
  - Installed to `/usr/local/bin/just` for system-wide access
  - Updated `EXPECTED_VERSIONS` in `test_image.py` to verify version 1.46.0

- **Test coverage for just**
  - Added `test_just_installed()` and `test_just_version()` in `test_image.py` to verify installation
  - Added integration tests in `test_integration.py`:
    - `test_just_default()` - Tests default recipe execution
    - `test_just_help()` - Tests help command
    - `test_just_info()` - Tests info command
    - `test_just_pytest()` - Tests test-pytest recipe
  - Tests handle variable whitespace in `just` output formatting using regex patterns

### Fixed
- **Multiple default recipe conflicts**
  - Moved `help` command to main `justfile` to serve as the default recipe
  - Removed default commands from `justfile.project` and `justfile.base` to prevent conflicts
  - Ensures consistent behavior across the layered justfile architecture

### Documentation
- Updated CHANGELOG.md with all changes in the `[Unreleased]` section
- Documented just installation and test additions
- Documented justfile default recipe fix

## Testing

- [x] Tests pass locally (`just test`)
- [x] Image tests pass (`just test-image`)
- [x] Integration tests pass (`just test-integration`)
- [x] Registry tests pass (`just test-registry`) (if applicable)
- [x] Manual testing performed (describe below)

### Manual Testing Details

- Verified `just` is installed and accessible in container
- Verified `just --version` returns 1.46.0
- Verified default recipe (`just` without arguments) shows help
- Verified `just help`, `just info`, and `just test-pytest` commands work correctly
- Verified tests handle variable whitespace in just output formatting

## Checklist

- [x] My code follows the project's style guidelines
- [x] I have performed a self-review of my code
- [x] I have commented my code, particularly in hard-to-understand areas
- [x] I have updated the documentation accordingly (README.md, CONTRIBUTE.md, etc.)
- [x] I have updated the CHANGELOG.md in the `[Unreleased]` section
- [x] My changes generate no new warnings or errors
- [x] I have added tests that prove my fix is effective or that my feature works
- [x] New and existing unit tests pass locally with my changes
- [x] Any dependent changes have been merged and published

## Additional Notes

**Files Changed:**
- `Containerfile` - Added just installation
- `assets/workspace/justfile` - Added help as default recipe
- `assets/workspace/.devcontainer/justfile.base` - Removed default recipe
- `assets/workspace/justfile.project` - Removed default recipe
- `tests/test_image.py` - Added just installation and version tests
- `tests/test_integration.py` - Added just recipe integration tests (172 lines added)
- `CHANGELOG.md` - Documented all changes

**Impact:**
- **Positive**: Users now have `just` available in the container for build automation
- **Positive**: Consistent default recipe behavior across all justfiles
- **Positive**: Comprehensive test coverage ensures just works correctly
- **Breaking**: None - this is an additive change



---
---

## Commits

### Commit 1: [b11408e](https://github.com/vig-os/devcontainer/commit/b11408eb5e52741ed2a1262d7f1355658d94c1e4) by [c-vigo](https://github.com/c-vigo) on January 8, 2026 at 12:05 PM
feat: install latest just and update tests for version verification, 23 files modified (Containerfile, tests/test_image.py)

### Commit 2: [a27c2b8](https://github.com/vig-os/devcontainer/commit/a27c2b8f9be9eaf662ba1dce11d1a7d0a3428c41) by [c-vigo](https://github.com/c-vigo) on January 8, 2026 at 01:55 PM
fix: fix multiple deafult recipes in  justfile, 195 files modified (assets/workspace/.devcontainer/justfile.base, assets/workspace/justfile, assets/workspace/justfile.project, tests/test_integration.py)

### Commit 3: [44501f8](https://github.com/vig-os/devcontainer/commit/44501f8c501a3bdd219832b1b146ad007021abdc) by [c-vigo](https://github.com/c-vigo) on January 8, 2026 at 04:14 PM
docs: update CHANGELOG for version 0.2.0 release, 15 files modified (CHANGELOG.md)

### Commit 4: [db0ebd7](https://github.com/vig-os/devcontainer/commit/db0ebd711b71027e27d4612f902ffa3df1b6dec9) by [c-vigo](https://github.com/c-vigo) on January 8, 2026 at 04:15 PM
chore: update CHANGELOG for recent changes, 10 files modified (CHANGELOG.md)
