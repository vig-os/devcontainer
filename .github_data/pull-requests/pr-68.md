---
type: pull_request
state: open
branch: feature/67-declarative-sync-manifest → dev
created: 2026-02-18T00:58:00Z
updated: 2026-02-19T08:43:45Z
author: gerchowl
author_url: https://github.com/gerchowl
url: https://github.com/vig-os/devcontainer/pull/68
comments: 27
labels: none
assignees: none
milestone: none
projects: none
relationship: none
synced: 2026-02-19T12:33:05.366Z
---

# [PR 68](https://github.com/vig-os/devcontainer/pull/68) feat: agent-driven development workflows, templates, and declarative sync manifest

## Summary

- Add 14 Cursor commands (start-issue, tdd, debug, review, submit-pr, etc.) and 2 Cursor rules (coding-principles, tdd) for agent-driven development workflows (#63)
- Add agent-friendly issue templates, changelog Cursor rule, and PR template enhancements (#61)
  - New templates: `refactor.yml`, `documentation.yml`, `ci_build.yml`, `config.yml`
  - New rule: `.cursor/rules/changelog.mdc` (always applied)
  - PR template enhanced with Changelog Entry section and CI/Build change type
- Replace the dual sync system (`sync-manifest.txt` + bash function in `prepare-build.sh`, and `sync-workspace.sh` shell script) with a single declarative Python manifest (`scripts/sync_manifest.py`) (#67)
- Sync Cursor rules, commands, GitHub templates, dependabot config, and pre-commit config into `assets/workspace/` with automated transformations
- Update `test_manifest_files` to skip checksum verification for intentionally transformed entries
- Reconcile issue template labels with repository labels (#80)
- Add just recipe for GitHub issue and PR dashboard (#84)
- Add Cursor worktree support for parallel agent development (#64)
  - `.cursor/worktrees.json` for native Cursor worktree initialization (macOS/Linux local)
  - `justfile.worktree` with tmux + cursor-agent CLI recipes for devcontainer environments
  - 7 autonomous worktree skills (`worktree:brainstorm`, `worktree:plan`, `worktree:execute`, `worktree:verify`, `worktree:pr`, `worktree:ask`, `worktree:solve-and-pr`)
  - Sync manifest updated to propagate worktree config and recipes to downstream projects

Closes #61
Closes #63
Closes #64
Closes #67
Closes #80
Closes #84

### Key files

| File | Purpose |
|------|---------|
| `scripts/sync_manifest.py` | Declarative manifest: what to sync + transforms |
| `.cursor/commands/*.md` | 14 new agent workflow commands |
| `.cursor/rules/*.mdc` | 3 new always-on rules (coding-principles, tdd, changelog) |
| `.cursor/skills/worktree:*/SKILL.md` | 7 autonomous worktree skills |
| `.cursor/worktrees.json` | Native Cursor worktree initialization |
| `justfile.worktree` | tmux + cursor-agent CLI worktree recipes |
| `.github/ISSUE_TEMPLATE/*.yml` | 6 issue templates + config.yml |
| `.github/pull_request_template.md` | Enhanced PR template |
| `scripts/prepare-build.sh` | Now calls `sync_manifest.py` instead of bash function |

### Transforms applied to workspace template

- `.pre-commit-config.yaml`: remove `generate-docs` hook, generalize Bandit paths, comment out `validate-commit-msg` args
- `.github/dependabot.yml`: remove Docker ecosystem section
- `.cursor/rules/commit-messages.mdc`: remove repo-specific doc link
- `.cursor/commands/tdd.md`, `verify.md`: generalize test recipe names

## Test plan

- [ ] CI passes (build image, project checks, image tests, integration tests)
- [ ] `just sync-workspace` produces correct output
- [ ] `uv run python scripts/sync_manifest.py list --transformed` shows 4 transformed entries
- [ ] YAML validation passes on generated workspace `.pre-commit-config.yaml` and `dependabot.yml`
- [ ] New issue templates render correctly on GitHub
- [ ] `just worktree-list` runs without error
- [ ] `.cursor/worktrees.json` is valid JSON


---
---

## Comments (18)

### [Comment #1](https://github.com/vig-os/devcontainer/pull/68#issuecomment-3919321616) by [@gerchowl](https://github.com/gerchowl)

_Posted on February 18, 2026 at 08:11 AM_

## Idea: Use GitHub issue bodies for implementation plan tracking instead of `docs/plans/` files

The current `/plan` command writes plans to `docs/plans/YYYY-MM-DD-<name>-plan.md` and `/execute-plan` reads from there. An alternative approach: write and track the implementation plan directly in the **GitHub issue body** (using task lists / checkboxes), and have the agent update task status there as work progresses.

### How it would work

- `/plan` reads the issue, breaks it into tasks, then **appends or replaces a "## Implementation Plan" section** in the issue body (via `gh issue edit --body`).
- `/execute-plan` reads the issue body, picks up unchecked tasks, executes them, and **checks them off** in the issue body as they complete.
- The issue becomes the single source of truth for both *what* needs doing and *what's done*.

### Pros of issue-body plans

| | |
|---|---|
| **Single source of truth** | Plan lives where the work is tracked — no separate file to keep in sync with the issue. |
| **Visible to the whole team** | Anyone looking at the issue instantly sees progress — no need to find and read a local `docs/plans/` file or check it out. |
| **No repo clutter** | Avoids accumulating plan markdown files in `docs/plans/` that become stale after merge. |
| **GitHub-native progress** | Task lists in issue bodies render as progress bars in issue lists and project boards. |
| **Cross-agent continuity** | A new agent session (or different worktree) can pick up where the last left off — just read the issue body. No need to find the right plan file. |
| **Audit trail via issue edit history** | GitHub tracks every edit to the issue body, so you get a changelog of plan evolution for free. |

### Cons / risks of issue-body plans

| | |
|---|---|
| **API rate limits** | Frequent `gh issue edit` calls (after every 2-3 task batch) could hit GitHub API rate limits, especially with multiple agents. |
| **Concurrent edit conflicts** | If two agents or a human edit the issue body at the same time, last-write-wins — edits can be lost. `docs/plans/` files at least get merge conflict detection via git. |
| **Size limits** | GitHub issue bodies have a ~65k character limit. Complex plans with detailed sub-tasks could get close. Plan files have no practical limit. |
| **Less structured** | Markdown in an issue body is harder to parse reliably than a dedicated plan file with a known schema. Edge cases in formatting could trip up the agent. |
| **Offline / local-first workflows** | Plan files work without network access; issue-body plans require connectivity for every read/write. |
| **Pollutes issue body** | The issue body serves double duty (problem description + implementation plan), which can make it long and harder for humans to scan. A `<details>` collapse could mitigate this. |
| **`/plan` origin (superpowers repo)** | The current `/plan` + `/execute-plan` pattern comes from the [superpowers](https://github.com/rileytomasek/cursor-superpowers) community repo. Keeping the file-based approach means we stay compatible with that ecosystem and its updates. Diverging means maintaining our own variant. |

### Possible hybrid approach

Use **both**: write a concise task checklist into the issue body for visibility and cross-agent continuity, but keep the detailed plan (file paths, verification steps, dependencies) in `docs/plans/` for structured parsing and offline use. The issue body becomes the "dashboard" and the plan file is the "spec".

---

Worth discussing whether the visibility and cross-agent continuity benefits outweigh the API/concurrency risks, or whether a hybrid gives us the best of both worlds.

---

### [Comment #2](https://github.com/vig-os/devcontainer/pull/68#issuecomment-3919327460) by [@gerchowl](https://github.com/gerchowl)

_Posted on February 18, 2026 at 08:12 AM_

**Correction on the "offline" con above:** The offline/local-first argument is pretty much irrelevant — the agents require network access anyway (GitHub API, MCP servers, tool calls, etc.). If the network is down, the agent can't work regardless of where the plan lives. So that con effectively drops off the list.

---

### [Comment #3](https://github.com/vig-os/devcontainer/pull/68#issuecomment-3919336528) by [@gerchowl](https://github.com/gerchowl)

_Posted on February 18, 2026 at 08:14 AM_

**Additional thought: tie `/plan` to issue context as a precondition**

Rather than allowing `/plan` to run in isolation, we should enforce that a plan can only be created/executed when the agent is **already on an issue branch** (or runs `/start-issue` first to get on one). This means:

1. `/plan` checks that the current branch matches `<type>/<issue_number>-*` (per our branch naming convention).
2. If not on an issue branch, it refuses and tells the agent to run `/start-issue` first.
3. The plan is then inherently scoped to that issue — the issue number is known, the issue body is accessible, and there's no ambiguity about *what* the plan is for.

**Why this matters for the issue-body approach:**

- If `/plan` always knows which issue it's working on, writing the plan into the issue body becomes trivial — no guessing, no "which issue?" prompts.
- It also prevents orphaned plan files in `docs/plans/` that aren't tied to any issue.
- The workflow becomes: `/start-issue` → `/plan` (writes to issue body) → `/execute-plan` (reads from issue body, checks off tasks) → `/submit-pr`. Clean linear pipeline, single source of truth throughout.

**This also works with the file-based approach** — even if we keep `docs/plans/`, gating `/plan` behind issue context means the plan file can be named `docs/plans/<issue_number>-<summary>-plan.md` and always references back to its issue. But it makes the argument for issue-body plans stronger since the issue is already the anchor point.

---

### [Comment #4](https://github.com/vig-os/devcontainer/pull/68#issuecomment-3919983081) by [@c-vigo](https://github.com/c-vigo)

_Posted on February 18, 2026 at 10:27 AM_

From `changelog.mdc`:

```
- **Skip** for `chore` commits that are purely internal (dependency bumps, CI-only config tweaks, formatting) unless they have user-visible impact.
```
Are we sure about this? I'd argue that a version bump by dependabot should be documented in the CHANGELOG.

---

### [Comment #5](https://github.com/vig-os/devcontainer/pull/68#issuecomment-3919996744) by [@c-vigo](https://github.com/c-vigo)

_Posted on February 18, 2026 at 10:29 AM_

I'd try to reduce token utilization with e.g. `commit-messages.mdc`:

```
---
description: Commit message format and rules (type, Refs)
alwaysApply: false
triggers:
  - command: "commit-msg"
---
```

Just an example, may be others.

---

### [Comment #6](https://github.com/vig-os/devcontainer/pull/68#issuecomment-3920159677) by [@c-vigo](https://github.com/c-vigo)

_Posted on February 18, 2026 at 11:02 AM_

For plans, I would propose adding them as comments to an existing issue:

- Preserves history
- Limit of 262144 bytes (65536-262144 characters depending on UTF8-encoded size) as per [this link](https://github.com/dead-claudia/github-limits)
- Does not trigger a sync-issue workflow, but we can manually run it targeting the topic branch so keep other branches clean

If so, pipeline could be:

- Agent proposes a plan in a temporary MD file.
- User reviews, optionally modifies and eventually approves.
- Agent publishes a comment on the issue using `gh` with proper formatting.
- Agent triggers a sync-issue manual dispatch targetting the issue branch
- Agent waits, verifies sync-issue workflow progress and pulls
- Plan is available as latest comment in issue file

---

Note on issue comment formatting:

- If the content starts with # (H1): All headers in that content are bumped down one level (# becomes ##, ## becomes ###, etc., up to ###### which stays as-is). This avoids clashing with the synced file's own H1 headers.
- If the content does NOT start with # : Headers are left completely untouched. So if a comment only uses ## or lower, nothing changes.

---

### [Comment #7](https://github.com/vig-os/devcontainer/pull/68#issuecomment-3920174152) by [@gerchowl](https://github.com/gerchowl)

_Posted on February 18, 2026 at 11:05 AM_

> If so, pipeline could be:
> 
> * Agent proposes a plan in a temporary MD file.
> * User reviews, optionally modifies and eventually approves.
> * Agent publishes a comment on the issue using `gh` with proper formatting.
> * Agent triggers a sync-issue manual dispatch targetting the issue branch
> * Agent waits, verifies sync-issue workflow progress and pulls
> * Plan is available as latest comment in issue file

dont think a wait is needed. whatever is added as a comment persists in that chat. also the sync-issue round trip will introduce wait? bad for DX?

---

### [Comment #8](https://github.com/vig-os/devcontainer/pull/68#issuecomment-3920177003) by [@c-vigo](https://github.com/c-vigo)

_Posted on February 18, 2026 at 11:06 AM_

Question: can (or already does) `sync_manifest.py` replace `utils.py`?

---

### [Comment #9](https://github.com/vig-os/devcontainer/pull/68#issuecomment-3920189916) by [@c-vigo](https://github.com/c-vigo)

_Posted on February 18, 2026 at 11:08 AM_

> dont think a wait is needed. whatever is added as a comment persists in that chat. also the sync-issue round trip will introduce wait? bad for DX?

It makes the plan persistently available locally, e.g. if you launch another plan. One can trigger the workflow but not wait for faster dev time.


---

### [Comment #10](https://github.com/vig-os/devcontainer/pull/68#issuecomment-3920203770) by [@c-vigo](https://github.com/c-vigo)

_Posted on February 18, 2026 at 11:12 AM_

I see the files referenced by the manifest are now permanently duplicated, is this intentional? My approach was syncing them at build time, since some replacements like version or dates can only happen there.

---

### [Comment #11](https://github.com/vig-os/devcontainer/pull/68#issuecomment-3920204605) by [@gerchowl](https://github.com/gerchowl)

_Posted on February 18, 2026 at 11:12 AM_

> I'd try to reduce token utilization with e.g. `commit-messages.mdc`:
> 
> ```
> ---
> description: Commit message format and rules (type, Refs)
> alwaysApply: false
> triggers:
>   - command: "commit-msg"
> ---
> ```
> 
> Just an example, may be others.

yeah one can generally introduce more granularity with a 'tree' model of rules and cmds that reference each other for specific use cases to reduce token usage, apparantly the `changelog.mdc` is 614 tokens.

---

### [Comment #12](https://github.com/vig-os/devcontainer/pull/68#issuecomment-3920236214) by [@gerchowl](https://github.com/gerchowl)

_Posted on February 18, 2026 at 11:18 AM_

> I see the files referenced by the manifest are now permanently duplicated, is this intentional? My approach was syncing them at build time, since some replacements like version or dates can only happen there.


see [#67](https://github.com/vig-os/devcontainer/issues/67)

yes. as in, so far everything was 1-to-1 applicable for the actual deployed devcontainer, many of the rules and configs done in the devc dev repo should go to the devcontainer as well, but some need changes, some parts of files are 'not wanted', how to deal with that? i though a copy und potentially a commit during dev makes one assess if the change should go to the devcontainer. 
now one could layer the copy & replace, i thought a single point of truth here gives better developer experience

one could adopt the logic to have it sync stuff at different times through the manifest.

---

### [Comment #13](https://github.com/vig-os/devcontainer/pull/68#issuecomment-3920239948) by [@gerchowl](https://github.com/gerchowl)

_Posted on February 18, 2026 at 11:19 AM_

> > dont think a wait is needed. whatever is added as a comment persists in that chat. also the sync-issue round trip will introduce wait? bad for DX?
> 
> It makes the plan persistently available locally, e.g. if you launch another plan. One can trigger the workflow but not wait for faster dev time.

sorry, i was unclear, the wait is not required in the workflow. with having it as comments and then sync is a good way!

---

### [Comment #14](https://github.com/vig-os/devcontainer/pull/68#issuecomment-3920267853) by [@c-vigo](https://github.com/c-vigo)

_Posted on February 18, 2026 at 11:25 AM_

There is a clash between the template labels in `.github/ISSUE_TEMPLATE` and the [default labels](https://github.com/organizations/vig-os/settings/repository-defaults) (which only apply to new repos, existing ones must be edited manually). The clash will only become visible when these changes are merged into `main`.

---

### [Comment #15](https://github.com/vig-os/devcontainer/pull/68#issuecomment-3920276550) by [@gerchowl](https://github.com/gerchowl)

_Posted on February 18, 2026 at 11:27 AM_

> Question: can (or already does) `sync_manifest.py` replace `utils.py`?

not sure if the sed from `utils.py` is not used elsewhere.
i'd opt more for the case of refactoring the classes and functions of the manifest to the utils so the manifest is like a 'conf'. (i also thought about making it an actual toml or sth. that gets parsed, which would be even nicer..) but refrained for a first implementation of it to understand what'd be needed for this

---

### [Comment #16](https://github.com/vig-os/devcontainer/pull/68#issuecomment-3920295361) by [@gerchowl](https://github.com/gerchowl)

_Posted on February 18, 2026 at 11:31 AM_

> There is a clash between the template labels in `.github/ISSUE_TEMPLATE` and the [default labels](https://github.com/organizations/vig-os/settings/repository-defaults) (which only apply to new repos, existing ones must be edited manually). The clash will only become visible when these changes are merged into `main`.

solution suggestions?

we can set ours as we like, or we have on 'curl  .. install.sh' a `create-gh-issue-labels.sh` that adds a set we agree on to the repo?

---

### [Comment #17](https://github.com/vig-os/devcontainer/pull/68#issuecomment-3921006265) by [@c-vigo](https://github.com/c-vigo)

_Posted on February 18, 2026 at 02:02 PM_

This is just a checkbox test:

- [ ] Task 1

---

### [Comment #18](https://github.com/vig-os/devcontainer/pull/68#issuecomment-3925664035) by [@gerchowl](https://github.com/gerchowl)

_Posted on February 19, 2026 at 08:43 AM_

## Implementation Plan — Addressing Review Comments

@c-vigo Here's the plan for addressing all your review comments. Please confirm you agree or suggest changes before we start.

### Tasks — Code Fixes (from inline review comments)

- [ ] **Task 1:** Add branch-aware note to `ci:fix` step 2 — apply your suggestion about using the correct branch from workflow run details — `.cursor/skills/ci:fix/SKILL.md`
- [ ] **Task 2:** Make `code:review` base-branch agnostic — replace hardcoded `dev` in `git diff dev...HEAD` / `git log dev..HEAD` with a dynamic base-branch lookup — `.cursor/skills/code:review/SKILL.md`
- [ ] **Task 3:** Generalize `code:tdd` test commands — replace project-specific `just test-image` etc. with generic justfile reference; add "verify suite is green first" preamble step — `.cursor/skills/code:tdd/SKILL.md`
- [ ] **Task 4:** Make `changelog.mdc` entry URL generic — replace hardcoded `vig-os/devcontainer` URL with a repo-agnostic placeholder; add sync manifest transform for this repo's URL — `.cursor/rules/changelog.mdc`, `scripts/sync_manifest.py`
- [ ] **Task 5:** Update `issue:triage` path — change `.github_data/issues/` to `docs/issues/` — `.cursor/skills/issue:triage/SKILL.md`
- [ ] **Task 6:** Specify `## Design` heading — change "must start with `##`" to "must start with `## Design`" — `.cursor/skills/design:brainstorm/SKILL.md`

### Tasks — Decisions from general comments

- [ ] **Task 7:** Update `changelog.mdc` with three clarifications:
  - **Dependabot dep bumps:** change from "skip" to "include" — dependency version bumps should be documented in CHANGELOG
  - **Sort order:** chronological within Unreleased; reorder by-issue on release
  - **Editing unreleased entries:** entries represent atomic user-facing state between versions, not a copy of commit history — can be updated across PRs while still unreleased
- [ ] **Task 8:** Token reduction for rules — review `alwaysApply` on all 6 rules (~10.8 KB total always injected); candidates for trigger-based activation:
  - `branch-naming.mdc` (3.5 KB, only needed for branch ops)
  - `changelog.mdc` (2.7 KB, only needed for commits/PRs)
  - `commit-messages.mdc` (1.5 KB, only needed for commits)
  - Also review skills for extractable branch-check boilerplate into a shared file
- [ ] **Task 9:** Label clash resolution — the existing `label-taxonomy.toml` + `scripts/setup-labels.sh` already solve this: run `setup-labels.sh` after repo creation to reconcile org defaults with our taxonomy. Will add a note documenting this and optionally `--prune` to remove org defaults that don't match.

### Tasks — Sync and cleanup

- [ ] **Task 10:** Run `sync-workspace` to propagate all changes to `assets/workspace/`
- [ ] **Task 11:** Create follow-up issue for `sync_manifest.py` vs `utils.py` refactor (out of scope for this PR)

### Dependencies

Tasks 1–9 are independent. Task 10 depends on 1–9. Task 11 is independent.

---

Does this cover everything? Any items you'd change or reprioritize?

---
---

## Review Threads (9)

### Review by [@c-vigo](https://github.com/c-vigo)

_Posted on February 19, 2026 at 07:20 AM_

_File: [`.cursor/rules/changelog.mdc (line 21 RIGHT)`](https://github.com/vig-os/devcontainer/pull/68#discussion_r2826063358)_

```diff
@@ -0,0 +1,72 @@
+---
+description: When and how to update CHANGELOG.md during development
+alwaysApply: true
+---
+
+# Changelog Update Rules
+
+When making code changes, follow these rules for updating [CHANGELOG.md](CHANGELOG.md).
+
+## When to update
+
+- **Always update** for `feat`, `fix`, `refactor`, `build`, `revert`, `style`, `test`, `docs` changes that affect user-visible behavior, public API, or developer workflow.
+- **Skip** for `chore` commits that are purely internal (dependency bumps, CI-only config tweaks, formatting) unless they have user-visible impact.
+- When in doubt, add an entry — it's easier to remove during review than to add later.
+
+## Where to update
+
+- Edit **only** the `## Unreleased` section at the top of `CHANGELOG.md`.
+- Place the entry under the correct category heading. Create the heading if it doesn't exist yet.
+- **Never** modify entries below `## Unreleased` (those are released versions).
+- **Never** change the release date or version number of any section.
```

we should be explicit if, within the Unreleased section, changes should be sorted chronologically, reversed, or by referenced issue

---

### Review by [@c-vigo](https://github.com/c-vigo)

_Posted on February 19, 2026 at 07:25 AM_

_File: [`.cursor/rules/changelog.mdc (line 16 RIGHT)`](https://github.com/vig-os/devcontainer/pull/68#discussion_r2826078426)_

```diff
@@ -0,0 +1,72 @@
+---
+description: When and how to update CHANGELOG.md during development
+alwaysApply: true
+---
+
+# Changelog Update Rules
+
+When making code changes, follow these rules for updating [CHANGELOG.md](CHANGELOG.md).
+
+## When to update
+
+- **Always update** for `feat`, `fix`, `refactor`, `build`, `revert`, `style`, `test`, `docs` changes that affect user-visible behavior, public API, or developer workflow.
+- **Skip** for `chore` commits that are purely internal (dependency bumps, CI-only config tweaks, formatting) unless they have user-visible impact.
+- When in doubt, add an entry — it's easier to remove during review than to add later.
+
+## Where to update
```

should we update previous CHANGELOG entries within unreleased?

e.g.:
- PR 1 introduces a new feature
- PR 2 introduces another feature
- We encounter a bug with feature from PR 1. In PR 3, are we allowed to modify CHANGELOG entries from PR 1 which are still unreleased?

Pros: better readibility
Cons: dev history lost in CHANGELOG

---

### Review by [@c-vigo](https://github.com/c-vigo)

_Posted on February 19, 2026 at 07:31 AM_

_File: [`.cursor/skills/ci:fix/SKILL.md (line 24 RIGHT)`](https://github.com/vig-os/devcontainer/pull/68#discussion_r2826097163)_

```diff
@@ -0,0 +1,49 @@
+---
+name: ci:fix
+description: Diagnoses and fixes a failing CI run using systematic debugging.
+disable-model-invocation: true
+---
+
+# Fix CI Failure
+
+Diagnose and fix a failing CI run using systematic debugging.
+
+## Workflow Steps
+
+### 1. Get failure details
+
+```bash
+gh run list --branch $(git branch --show-current) --limit 5
+gh run view <run-id> --log-failed
+```
+
+- Identify the failing workflow, job, and step.
+
+### 2. Read the workflow file
+
+- Open the relevant workflow in `.github/workflows/` or action in `.github/actions/`.
```

Specially when modifying CI/CD files, it can happen that the version in `dev` is not the version tested in the PR.

```suggestion
- Open the relevant workflow in `.github/workflows/` or action in `.github/actions/`.
- Make sure you are using the correct branch specified in the workflow run details
```

---

### Review by [@c-vigo](https://github.com/c-vigo)

_Posted on February 19, 2026 at 07:37 AM_

_File: [`.cursor/skills/code:review/SKILL.md (line 16 RIGHT)`](https://github.com/vig-os/devcontainer/pull/68#discussion_r2826117290)_

```diff
@@ -0,0 +1,63 @@
+---
+name: code:review
+description: Performs a structured self-review of changes before submitting a PR.
+disable-model-invocation: true
+---
+
+# Self-Review
+
+Structured self-review of changes before submitting a PR.
+
+## Workflow Steps
+
+### 1. Gather context
+
+```bash
+git diff dev...HEAD --stat
```

merging does not necessarily happen into dev, does it? e.g. with sub-issues you would want to merge into the parent issue branch

---

### Review by [@c-vigo](https://github.com/c-vigo)

_Posted on February 19, 2026 at 07:40 AM_

_File: [`.cursor/skills/code:tdd/SKILL.md (line 30 RIGHT)`](https://github.com/vig-os/devcontainer/pull/68#discussion_r2826125413)_

```diff
@@ -0,0 +1,55 @@
+---
+name: code:tdd
+description: Implements changes using strict RED-GREEN-REFACTOR discipline.
+disable-model-invocation: true
+---
+
+# Test-Driven Development
+
+Implement changes using strict RED-GREEN-REFACTOR discipline.
+Each phase is committed separately so the git history proves TDD compliance to auditors.
+
+## Workflow Steps
+
+### 1. Understand what to test
+
+- Read the issue's acceptance criteria or the current task from the plan.
+- Identify the behavior to implement and the expected outcomes.
+
+### 2. RED — Write a failing test
+
+- Write the test **before** any implementation code.
+- The test must assert the expected behavior.
+- Run the relevant test suite to confirm the test **fails**:
+
+  ```bash
+  just test-image       # container image tests
+  just test-integration # devcontainer integration tests
+  just test-utils       # utility tests
+  just test-bats        # shell script tests
+  ```
```

this is also specific to this project, maybe pointing to the justfile instead?

I'd also argue that it's good practice to:

- Identify the test suite we are going to expand (assuming it exists)
- Run it once to verify it's green
- Go on with TDD

---

### Review by [@c-vigo](https://github.com/c-vigo)

_Posted on February 19, 2026 at 07:43 AM_

_File: [`.cursor/rules/changelog.mdc (line 41 RIGHT)`](https://github.com/vig-os/devcontainer/pull/68#discussion_r2826134833)_

```diff
@@ -0,0 +1,72 @@
+---
+description: When and how to update CHANGELOG.md during development
+alwaysApply: true
+---
+
+# Changelog Update Rules
+
+When making code changes, follow these rules for updating [CHANGELOG.md](CHANGELOG.md).
+
+## When to update
+
+- **Always update** for `feat`, `fix`, `refactor`, `build`, `revert`, `style`, `test`, `docs` changes that affect user-visible behavior, public API, or developer workflow.
+- **Skip** for `chore` commits that are purely internal (dependency bumps, CI-only config tweaks, formatting) unless they have user-visible impact.
+- When in doubt, add an entry — it's easier to remove during review than to add later.
+
+## Where to update
+
+- Edit **only** the `## Unreleased` section at the top of `CHANGELOG.md`.
+- Place the entry under the correct category heading. Create the heading if it doesn't exist yet.
+- **Never** modify entries below `## Unreleased` (those are released versions).
+- **Never** change the release date or version number of any section.
+
+## Category headings (in order)
+
+Use these [Keep a Changelog](https://keepachangelog.com/) categories:
+
+```
+### Added       — new features, capabilities, tools
+### Changed     — changes to existing functionality
+### Deprecated  — features that will be removed
+### Removed     — features that were removed
+### Fixed       — bug fixes
+### Security    — vulnerability fixes or security improvements
+```
+
+## Entry format
+
+Follow the existing style in the file:
+
+```markdown
+- **Bold short title** ([#<issue>](https://github.com/vig-os/devcontainer/issues/<issue>))
```

this should be a generic URL if we are going to re-use the rules

---

### Review by [@c-vigo](https://github.com/c-vigo)

_Posted on February 19, 2026 at 07:47 AM_

_File: [`.cursor/skills/design:brainstorm/SKILL.md (line 64 RIGHT)`](https://github.com/vig-os/devcontainer/pull/68#discussion_r2826150413)_

```diff
@@ -0,0 +1,80 @@
+---
+name: design:brainstorm
+description: Explores requirements and design before writing any code.
+disable-model-invocation: true
+---
+
+# Brainstorm
+
+Explore requirements and design before writing any code. This command activates before creative work — features, components, behavior changes.
+
+**Rule: no code until the user approves a design.**
+
+## Precondition: Issue Branch Required
+
+Before doing anything else, verify you are on an issue branch:
+
+1. Run: `git branch --show-current`
+2. The branch name **must** match `<type>/<issue_number>-*` (e.g. `feature/63-worktree-support`).
+3. Extract the `<issue_number>` from the branch name.
+4. If the branch does not match, **stop** and tell the user:
+   - They need to be on an issue branch.
+   - Offer to run [issue:claim](../issue:claim/SKILL.md) to create one.
+
+## Workflow Steps
+
+### 1. Explore project context
+
+- Read relevant files, docs, recent commits to understand current state.
+- Identify constraints, existing patterns, and related code.
+- Check issue comments for prior discussion or context.
+
+### 2. Ask clarifying questions
+
+- One question at a time. Do not overwhelm.
+- Prefer multiple choice when possible; open-ended is fine when needed.
+- Focus on: purpose, constraints, success criteria, edge cases.
+- Continue until you understand the full scope.
+
+### 3. Propose approaches
+
+- Present 2-3 approaches with trade-offs.
+- Lead with your recommended option and explain why.
+- Apply YAGNI — cut anything speculative.
+
+### 4. Present design for approval
+
+- Present the design in sections, scaled to complexity.
+- After each section, ask: "Does this look right so far?"
+- Cover: architecture, components, data flow, error handling, testing strategy.
+- Revise if the user pushes back. Go back to questions if something is unclear.
+
+### 5. Publish design as a GitHub issue comment
+
+After user approval, post the design as a **comment on the issue**. This is the durable, visible record.
+
+1. Determine the repo: `gh repo view --json nameWithOwner --jq '.nameWithOwner'`
+2. Post the design comment:
+
+   ```bash
+   gh api repos/{owner}/{repo}/issues/{issue_number}/comments \
+     -f body="<design_content>"
+   ```
+
+3. The comment must start with `##` (H2) to avoid header-level bumping when synced by the `sync-issues` workflow.
```

maybe specify to start with:
```suggestion
3. The comment must start with `## Design` (H2) to avoid header-level bumping when synced by the `sync-issues` workflow.
```

---

### Review by [@c-vigo](https://github.com/c-vigo)

_Posted on February 19, 2026 at 07:49 AM_

_File: [`.cursor/skills/design:plan/SKILL.md (line 42 RIGHT)`](https://github.com/vig-os/devcontainer/pull/68#discussion_r2826157416)_

```diff
@@ -0,0 +1,90 @@
+---
+name: design:plan
+description: Breaks an approved design or issue into bite-sized implementation tasks.
+disable-model-invocation: true
+---
+
+# Write Implementation Plan
+
+Break an approved design or issue into bite-sized implementation tasks.
+
+## Precondition: Issue Branch Required
+
+Before doing anything else, verify you are on an issue branch:
+
+1. Run: `git branch --show-current`
+2. The branch name **must** match `<type>/<issue_number>-*` (e.g. `feature/63-worktree-support`).
+3. Extract the `<issue_number>` from the branch name.
+4. If the branch does not match, **stop** and tell the user:
+   - They need to be on an issue branch.
+   - Offer to run [issue:claim](../issue:claim/SKILL.md) to create one.
+
+## Workflow Steps
+
+### 1. Read the issue
+
+- Run: `gh issue view <issue_number> --json title,labels,body`
+- Read acceptance criteria, implementation notes, and constraints from the issue body.
+- Check issue comments for an existing design (look for `## Design` heading) for additional context.
+
+### 2. Break into tasks
+
+- Each task should be completable in 2-5 minutes.
+- Each task must specify:
+  - **What**: one sentence describing the change
+  - **Files**: exact file paths to create or modify
+  - **Verification**: how to confirm the task is done (e.g. `just test`, specific test passes)
+- Order tasks by dependency — earlier tasks should not depend on later ones.
+
+### 3. Identify test tasks
+
+- For each functional task, include a corresponding test task (or note that the test is part of the same task).
+- Follow TDD: test tasks come before or alongside implementation tasks, not after.
```

reference to the skill

---

### Review by [@c-vigo](https://github.com/c-vigo)

_Posted on February 19, 2026 at 07:55 AM_

_File: [`.cursor/skills/issue:triage/SKILL.md (line 45 RIGHT)`](https://github.com/vig-os/devcontainer/pull/68#discussion_r2826178834)_

```diff
@@ -0,0 +1,289 @@
+---
+name: issue:triage
+description: Triage open GitHub issues by analyzing them across priority, area, effort, SemVer impact, dependencies, and release readiness. Groups related issues into parent/sub-issue clusters, suggests milestone assignments, and applies approved changes via gh CLI. Use when the user asks to triage issues, groom the backlog, plan a milestone, or organize open issues.
+---
+
+# Issue Triage
+
+Perform a full triage of all open issues in the current GitHub repo. Analyze
+each issue across 7 dimensions, group related issues into parent/sub-issue
+clusters, and suggest milestone assignments. All mutations require explicit
+user approval.
+
+## Phase 1: Collect
+
+Gather all data needed for analysis. Run these commands and hold the results
+in memory:
+
+```bash
+# Open issues (all fields needed for analysis)
+gh issue list --state open --limit 200 \
+  --json number,title,labels,milestone,assignees,body,createdAt,updatedAt
+
+# Open PRs (readiness context + PR-to-issue mapping)
+gh pr list --state open \
+  --json number,title,headRefName,labels,milestone,body,reviewDecision
+
+# Recently merged PRs (last 20 -- for issues that may be nearly done)
+gh pr list --state merged --limit 20 \
+  --json number,title,headRefName,mergedAt
+
+# Milestones
+gh api repos/{owner}/{repo}/milestones \
+  --jq '.[] | {number,title,state,open_issues,closed_issues}'
+
+# Labels
+gh label list --json name,description,color
+
+# Existing sub-issue relationships (for each issue, skip 404s)
+# List sub-issues of an issue:
+gh api repos/{owner}/{repo}/issues/{n}/sub_issues 2>/dev/null
+# Get parent of an issue:
+gh api repos/{owner}/{repo}/issues/{n}/parent 2>/dev/null
+```
+
+Also read `.github_data/issues/` for local issue markdown files if available.
```

this has changed to `docs/issues` in a recent PR

---

