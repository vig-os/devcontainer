---
type: pull_request
state: open
branch: feature/34-rename-venv-container-creation → feature/37-automate-standardize-repository-setup
created: 2026-02-03T12:55:55Z
updated: 2026-02-03T12:55:56Z
author: c-vigo
author_url: https://github.com/c-vigo
url: https://github.com/vig-os/devcontainer/pull/42
comments: 0
labels: none
assignees: c-vigo
milestone: none
projects: none
relationship: none
synced: 2026-02-03T12:56:14.572Z
---

# [PR 42](https://github.com/vig-os/devcontainer/pull/42) feat: rename venv prompt to project name on container creation (#34)

# Pull Request

## Description

Renames the virtual environment prompt from "template-project" to the project short name when the devcontainer is created. The venv in the image stays at `/root/assets/workspace/.venv`; the post-create script runs `sed` to replace "template-project" with `{{SHORT_NAME}}` in `.venv/bin/activate` so the shell prompt shows the project name. Also fixes pytest collecting tests from `tests/tmp/` (integration workspace dirs), which caused collection errors.

## Related Issue(s)

Closes #34
Fixes bug in #36

## Type of Change

- [x] Bug fix (non-breaking change which fixes an issue)
- [x] New feature (non-breaking change which adds functionality)
- [ ] Breaking change (fix or feature that would cause existing functionality to not work as expected)
- [ ] Documentation update
- [ ] Refactoring (no functional changes)
- [ ] Test updates

## Changes Made

- **post-create.sh** — Add `sed -i 's/template-project/{{SHORT_NAME}}/g' /root/assets/workspace/.venv/bin/activate` so the venv prompt is updated on first container creation.
- **test_integration.py** — Add `test_venv_prompt_name` in `TestDevContainerUserConf`: uses `devcontainer_up`, runs `devcontainer exec ... cat /root/assets/workspace/.venv/bin/activate`, asserts "template-project" is not in the output.
- **pyproject.toml** — Add `norecursedirs = "tmp"` so pytest does not collect tests from `tests/tmp/` (integration test workspace dirs), avoiding `ModuleNotFoundError: tests.test_example`.
- **CHANGELOG.md** — Document commit message standardization (#36), venv prompt renaming (#34), and pytest tmp exclusion under Unreleased.
- **test_integration.py** — Fix existing commit message in test to match new commit message standard (from #36).

## Testing

- [x] Tests pass locally (`just test`)

## Checklist

- [x] My code follows the project's style guidelines
- [x] I have performed a self-review of my code
- [x] I have commented my code, particularly in hard-to-understand areas
- [x] I have updated the documentation accordingly (README.md, CONTRIBUTE.md, etc.)
- [x] I have updated the CHANGELOG.md in the `[Unreleased]` section
- [x] My changes generate no new warnings or errors
- [x] I have added tests that prove my fix is effective or that my feature works
- [x] New and existing unit tests pass locally with my changes
- [x] Any dependent changes have been merged and published

