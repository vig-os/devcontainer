---
type: pull_request
state: closed (merged)
branch: dev â†’ main
created: 2026-01-09T16:40:16Z
updated: 2026-01-26T15:01:31Z
author: c-vigo
author_url: https://github.com/c-vigo
url: https://github.com/vig-os/devcontainer/pull/26
comments: 0
labels: none
assignees: c-vigo
milestone: none
projects: none
relationship: none
merged: 2026-01-26T15:01:31Z
synced: 2026-01-28T07:15:18.493Z
---

# [PR 26](https://github.com/vig-os/devcontainer/pull/26) Release Candidate 0.2.1

## Description

This PR introduces **Release 0.2.1** of the vigOS Development Environment, featuring major CI/CD automation improvements, enhanced testing infrastructure, and streamlined development workflows.

Key highlights:
- **GitHub Actions workflows** for automated container image publishing and issue/PR syncing
- **Modular build process** with separated preparation and build steps
- **Enhanced test suite** with utility function tests and improved organization
- **Development workflow improvements** including simplified contribution guidelines
- **Code cleanup** removing deprecated registry testing infrastructure

## Related Issue(s)

- Fixes #1
- Closes #10
- Closes #20

## Type of Change

<!-- Mark the relevant option with an 'x' -->

- [x] Bug fix (non-breaking change which fixes an issue)
- [x] New feature (non-breaking change which adds functionality)
- [ ] Breaking change (fix or feature that would cause existing functionality to not work as expected)
- [x] Documentation update
- [x] Refactoring (no functional changes)
- [x] Test updates

## Changes Made

### Added

- **cargo-binstall** in Containerfile
  - Install via official install script; binaries in `/root/.cargo/bin` with `ENV PATH` set
  - Version check in `tests/test_image.py`
- **typstyle** linting
  - Install via `cargo-binstall` in Containerfile
  - Version check in test suite
  - Pre-commit hook configuration for typstyle
- **Just command runner** installation and version verification
  - Added installation of the latest version of `just` (1.46.0) in the Containerfile
  - Added tests to verify `just` installation and version in `test_image.py`
  - Added integration tests for `just` recipes (`test_just_default`, `test_just_help`, `test_just_info`, `test_just_pytest`)
- **GitHub Actions workflow for multi-architecture container image publishing** (`.github/workflows/publish-container-image.yml`)
  - Automated build and publish workflow triggered on semantic version tags (vX.Y.Z)
  - Multi-architecture support (amd64, arm64) with parallel builds on native runners
  - Image testing before push: runs `pytest tests/test_image.py` against built images
  - Manual dispatch support for testing workflow changes without pushing images (default version: 99.0.1)
  - Comprehensive error handling and verification steps
  - OCI-standard labels via `docker/metadata-action`
  - Build log artifacts for debugging (always uploaded for manual dispatch and on failure)
  - Multi-architecture manifest creation for automatic platform selection
  - Centralized version extraction job for reuse across build and manifest jobs
  - Concurrency control to prevent duplicate builds
  - Timeout protection (60 minutes for builds, 10 minutes for manifest)
- **GitHub Actions workflow for syncing issues and PRs** (`.github/workflows/sync-issues.yml`)
  - Automated sync of GitHub issues and PRs to markdown files in `.github_data/`
  - Runs on schedule (daily), manual trigger, issue events, and PR events
  - Smart branch selection: commits to `main` when PRs are merged into `main`, otherwise commits to `dev`
  - Cache-based state management to track last sync timestamp
  - Force update option for manual workflow dispatch
- **Enhanced test suite**
  - Added utility function tests (`tests/test_utils.py`) for `sed_inplace` and `update_version_line`
  - Improved test organization in justfile with grouped test commands (`just test-all`, `just test-image`, `just test-utils`)
- **Documentation improvements**
  - Added workflow status badge to README template showing publish workflow status
  - Simplified contribution guidelines by removing QEMU build instructions

### Changed

- **Devcontainer test fixtures** (`tests/conftest.py`)
  - Shared helpers for `devcontainer_up` and `devcontainer_with_sidecar`: path resolution, env/SSH, project yaml mount, run up, teardown
  - `devcontainer_with_sidecar` scope set to session (one bring-up per session for sidecar tests)
  - Cleanup uses same approach as `just clean-test-containers` (list containers by name, `podman rm -f`) so stacks are torn down reliably
  - Redundant imports removed; fixture logic simplified for maintainability
- **Build process refactoring**
  - Separated build preparation into dedicated `prepare-build.sh` script
  - Handles template replacement, asset copying, and README version updates
  - Improved build script with `--no-cache` flag support and better error handling
- **Development workflow streamlining**
  - Simplified contribution guidelines: removed QEMU build instructions and registry testing complexity
  - Consolidated test commands in justfile for better clarity
  - Updated development setup instructions to reflect simplified workflow
- **Package versions**
  - Updated `ruff` from 0.14.10 to 0.14.11 in test expectations

### Deprecated

### Removed

- **Deprecated justfile test recipe and test**
  - Removed deprecated test command from justfile
  - Removed deprecated test for default recipe in justfile (`TestJustIntegration.test_default_recipe_includes_check`)
- **Registry testing infrastructure** (moved to GitHub Actions workflow)
  - Removed `scripts/push.sh` (455 lines) - functionality now in GitHub Actions workflow
  - Removed `tests/test_registry.py` (788 lines) - registry tests now in CI/CD pipeline
  - Removed `scripts/update_readme.py` (80 lines) - README updates handled by workflow
  - Removed `scripts/utils.sh` (75 lines) - utilities consolidated into other scripts
  - Removed `just test-registry` command - no longer needed with automated workflow

### Fixed

- **Justfile default recipe conflict**
  - Fixed multiple default recipes issue by moving `help` command to the main justfile
  - Removed default command from `justfile.project` and `justfile.base` to prevent conflicts
  - Updated just recipe tests to handle variable whitespace in command output formatting
- **Invalid docker-compose.project.yaml**
  - Added empty services section to docker-compose.project.yaml to fix YAML validation
- **Python import resolution in tests**
  - Fixed import errors in `tests/test_utils.py` by using `importlib.util` for explicit module loading
  - Improved compatibility with static analysis tools and linters
- **Build script improvements**
  - Fixed shellcheck warnings by properly quoting script paths
  - Improved debug output and error messages

## Testing

<!-- Describe the tests you ran and how to verify your changes -->
- [x] Tests pass locally (`just test`)
- [x] Manual testing performed (describe below)

### Manual Testing Details

- **GitHub Actions workflows**: Tested manual dispatch of publish workflow on `dev` branch
  - Verified workflow runs tests without pushing images
  - Confirmed build logs are uploaded for manual triggers
  - Tested version extraction logic for both tag pushes and manual dispatch

- **Build process**: Verified modular build process works correctly
  - Tested `prepare-build.sh` script independently
  - Confirmed `build.sh` with `--no-cache` flag works as expected

- **Test suite**: All new utility tests pass
  - `tests/test_utils.py` covers `sed_inplace` and `update_version_line` functions
  - Just recipe tests updated to handle variable whitespace

- **Markdown linting**: Verified CHANGELOG.md no longer triggers MD024 warnings
  - Confirmed `siblings_only: true` configuration works correctly
  - Tested pre-commit hooks run successfully

## Checklist

<!-- Mark completed items with an 'x' -->
- [x] My code follows the project's style guidelines
- [x] I have performed a self-review of my code
- [x] I have commented my code, particularly in hard-to-understand areas
- [x] I have updated the documentation accordingly (README.md, CONTRIBUTE.md, etc.)
- [x] I have updated the CHANGELOG.md in the `[Unreleased]` section
- [x] My changes generate no new warnings or errors
- [x] I have added tests that prove my fix is effective or that my feature works
- [x] New and existing unit tests pass locally with my changes
- [x] Any dependent changes have been merged and published

## Additional Notes

### Migration Notes

- **Registry testing**: The `just test-registry` command has been removed. Registry testing is now handled automatically by the GitHub Actions workflow when images are pushed.

- **Build scripts**: The build process has been modularized. The `prepare-build.sh` script now handles all build preparation, while `build.sh` focuses on the actual image building.

- **GitHub Actions**: The new workflows require:
  - `GITHUB_TOKEN` (automatically provided)
  - Access to GitHub Container Registry (ghcr.io)
  - Native runners for multi-architecture builds (automatically handled by GitHub)

### Statistics

- **Files changed**: 66 files
- **Additions**: +4,204 lines
- **Deletions**: -2,660 lines
- **Net change**: +1,544 lines

### Next Steps

After merging this PR:
1. Tag the release: `git tag v0.2.1`
2. Push the tag: `git push origin v0.2.1`
3. The GitHub Actions workflow will automatically build and publish the container image



---
---

## Commits

### Commit 1: [b71af74](https://github.com/vig-os/devcontainer/commit/b71af741bf9707afdf6a9715328c8e0ff17c6895) by [c-vigo](https://github.com/c-vigo) on January 7, 2026 at 08:37 AM
docs: update README and template to use bash instead of sh for install script, 38 files modified (README.md, docs/templates/README.md.j2)

### Commit 2: [6814fe5](https://github.com/vig-os/devcontainer/commit/6814fe511689b7505e650a2495c3feacee93e00a) by [c-vigo](https://github.com/c-vigo) on January 7, 2026 at 08:38 AM
fix: add empty services section to docker-compose.project.yaml, 2 files modified (assets/workspace/.devcontainer/docker-compose.project.yaml)

### Commit 3: [b11408e](https://github.com/vig-os/devcontainer/commit/b11408eb5e52741ed2a1262d7f1355658d94c1e4) by [c-vigo](https://github.com/c-vigo) on January 8, 2026 at 12:05 PM
feat: install latest just and update tests for version verification, 23 files modified (Containerfile, tests/test_image.py)

### Commit 4: [a27c2b8](https://github.com/vig-os/devcontainer/commit/a27c2b8f9be9eaf662ba1dce11d1a7d0a3428c41) by [c-vigo](https://github.com/c-vigo) on January 8, 2026 at 01:55 PM
fix: fix multiple deafult recipes in  justfile, 195 files modified (assets/workspace/.devcontainer/justfile.base, assets/workspace/justfile, assets/workspace/justfile.project, tests/test_integration.py)

### Commit 5: [44501f8](https://github.com/vig-os/devcontainer/commit/44501f8c501a3bdd219832b1b146ad007021abdc) by [c-vigo](https://github.com/c-vigo) on January 8, 2026 at 04:14 PM
docs: update CHANGELOG for version 0.2.0 release, 15 files modified (CHANGELOG.md)

### Commit 6: [db0ebd7](https://github.com/vig-os/devcontainer/commit/db0ebd711b71027e27d4612f902ffa3df1b6dec9) by [c-vigo](https://github.com/c-vigo) on January 8, 2026 at 04:15 PM
chore: update CHANGELOG for recent changes, 10 files modified (CHANGELOG.md)

### Commit 7: [0cf36bf](https://github.com/vig-os/devcontainer/commit/0cf36bf957d5d05495318b1db2e149d66500f2fc) by [c-vigo](https://github.com/c-vigo) on January 9, 2026 at 01:18 PM
Merge pull request #25 from vig-os/c-vigo/issue1, 243 files modified (CHANGELOG.md, Containerfile, assets/workspace/.devcontainer/justfile.base, assets/workspace/justfile, assets/workspace/justfile.project, tests/test_image.py, tests/test_integration.py)

### Commit 8: [2472b29](https://github.com/vig-os/devcontainer/commit/2472b298dc54589da948bed0a4df911b2d0714bb) by [c-vigo](https://github.com/c-vigo) on January 9, 2026 at 01:45 PM
refactor: streamline development setup process, 429 files modified (CONTRIBUTE.md, README.md, docs/generate.py, docs/templates/CONTRIBUTE.md.j2, justfile, scripts/init.sh, scripts/requirements.yaml, scripts/setup.sh)

### Commit 9: [79da534](https://github.com/vig-os/devcontainer/commit/79da534bdc97fc87bad6c869d81777925bb9261a) by [c-vigo](https://github.com/c-vigo) on January 9, 2026 at 01:56 PM
chore: update ruff version in test_image.py to 0.14.11, 2 files modified (tests/test_image.py)

### Commit 10: [5435712](https://github.com/vig-os/devcontainer/commit/5435712c78b865d3d557edc3b7b872fc89facda0) by [c-vigo](https://github.com/c-vigo) on January 9, 2026 at 02:11 PM
refactor: modularize build process by creating prepare-build.sh script, 251 files modified (scripts/build.sh, scripts/prepare-build.sh, scripts/utils.py)

### Commit 11: [79b44a3](https://github.com/vig-os/devcontainer/commit/79b44a339d3840ac22c8c3baec3fb26599278ac6) by [c-vigo](https://github.com/c-vigo) on January 9, 2026 at 02:14 PM
docs: update README and templates to reflect versioning changes, 24 files modified (README.md, docs/generate.py, docs/templates/README.md.j2)

### Commit 12: [7be2811](https://github.com/vig-os/devcontainer/commit/7be28111aa959bd9626a1a88ab6c049e2b3d7234) by [c-vigo](https://github.com/c-vigo) on January 9, 2026 at 02:20 PM
feat: add utility tests and enhance justfile for test organization, 463 files modified (CONTRIBUTE.md, README.md, justfile, scripts/__init__.py, scripts/run_tests.sh, tests/test_utils.py)

### Commit 13: [003ca31](https://github.com/vig-os/devcontainer/commit/003ca31d95936cc75210156dfa944861d94a6561) by [c-vigo](https://github.com/c-vigo) on January 9, 2026 at 03:28 PM
feat: add GitHub Actions workflow for multi-architecture container image publishing, 384 files modified (.github/workflows/publish-container-image.yml)

### Commit 14: [a7586c8](https://github.com/vig-os/devcontainer/commit/a7586c83303150c121a52462a5e6df506f98abd5) by [c-vigo](https://github.com/c-vigo) on January 9, 2026 at 03:50 PM
refactor: simplify contribution guidelines and update justfile commands, 1444 files modified (CONTRIBUTE.md, README.md, docs/templates/CONTRIBUTE.md.j2, justfile, scripts/push.sh, scripts/update_readme.py, scripts/utils.sh, tests/test_registry.py)

### Commit 15: [22956b5](https://github.com/vig-os/devcontainer/commit/22956b5a22f57298c18d99df82ddb70e7ef6f77f) by [c-vigo](https://github.com/c-vigo) on January 9, 2026 at 04:15 PM
feat: add GitHub Actions workflow to sync issues and PRs to markdown files, 936 files modified

### Commit 16: [132a6fe](https://github.com/vig-os/devcontainer/commit/132a6fe5e3fee04418ef9a2352bf3bff21c47b1d) by [commit-action-bot[bot]](https://github.com/apps/commit-action-bot) on January 9, 2026 at 04:18 PM
chore: sync issues and PRs, 2836 files modified

### Commit 17: [aaa601e](https://github.com/vig-os/devcontainer/commit/aaa601e03a706421a92976a698fecfd9f01bf057) by [c-vigo](https://github.com/c-vigo) on January 9, 2026 at 04:34 PM
chore: update pre-commit configuration and pymarkdown settings, 14 files modified (.pre-commit-config.yaml, .pymarkdown)

### Commit 18: [80bc6b5](https://github.com/vig-os/devcontainer/commit/80bc6b56543339082f2b69cd5aac374e4a2edc83) by [c-vigo](https://github.com/c-vigo) on January 9, 2026 at 04:34 PM
chore: update CHANGELOG, 50 files modified (CHANGELOG.md)

### Commit 19: [6a7b1f5](https://github.com/vig-os/devcontainer/commit/6a7b1f51a0a6adda8fb2b5a7110ad97548175a47) by [c-vigo](https://github.com/c-vigo) on January 9, 2026 at 04:39 PM
chore: simplify pull request template by removing redundant test checks, 3 files modified (.github/pull_request_template.md)

### Commit 20: [5c73d91](https://github.com/vig-os/devcontainer/commit/5c73d911d175feae2dd3ec6422b2b736f33606c5) by [c-vigo](https://github.com/c-vigo) on January 19, 2026 at 09:16 AM
chore: update .gitignore to include all VS Code workspace files for personal editor layout, 4 files modified (assets/workspace/.devcontainer/.gitignore)

### Commit 21: [52f8695](https://github.com/vig-os/devcontainer/commit/52f869543ba97d9f685df60bd10861aeee7467c6) by [gerchowl](https://github.com/gerchowl) on January 23, 2026 at 03:44 PM
changing expected versions to check for minor and accept all patches, updated gh-cli, 10 files modified (tests/test_image.py)

### Commit 22: [20d1ec8](https://github.com/vig-os/devcontainer/commit/20d1ec84a627118dcddd567511ce95ff3201104e) by [c-vigo](https://github.com/c-vigo) on January 26, 2026 at 01:27 PM
refactor: remove deprecated test command form justfile, 7 files modified (justfile)

### Commit 23: [3122ba8](https://github.com/vig-os/devcontainer/commit/3122ba8d2f50f09f6d48b099b24db1dfb9ff15fb) by [c-vigo](https://github.com/c-vigo) on January 26, 2026 at 01:28 PM
refactor: remove deprecated test for default recipe in justfile, 17 files modified (tests/test_version_check.py)

### Commit 24: [9dc74f2](https://github.com/vig-os/devcontainer/commit/9dc74f29d29c260fc6efdf474f88056f0858c67c) by [c-vigo](https://github.com/c-vigo) on January 26, 2026 at 01:30 PM
feat: enhance devcontainer testing setup, 604 files modified (tests/conftest.py)

### Commit 25: [9290ce0](https://github.com/vig-os/devcontainer/commit/9290ce05a03dfc07c32523b6c172a8f9f1cbf58c) by [c-vigo](https://github.com/c-vigo) on January 26, 2026 at 02:15 PM
feat: add cargo-binstall version check to test suite, 10 files modified (tests/test_image.py)

### Commit 26: [bd11258](https://github.com/vig-os/devcontainer/commit/bd112581b1db63290f3caf03d2147d283806dc22) by [c-vigo](https://github.com/c-vigo) on January 26, 2026 at 02:23 PM
feat: add cargo-binstall installation to Containerfile, 6 files modified (Containerfile)

### Commit 27: [38e4fcf](https://github.com/vig-os/devcontainer/commit/38e4fcf0c4989fa16c30f550e0dd2f15b48bb735) by [c-vigo](https://github.com/c-vigo) on January 26, 2026 at 02:26 PM
feat: add typstyle version check to test suite, 12 files modified (tests/test_image.py)

### Commit 28: [f344370](https://github.com/vig-os/devcontainer/commit/f3443706557d08e7e8901f5beb037c8cd79dea9f) by [c-vigo](https://github.com/c-vigo) on January 26, 2026 at 02:28 PM
feat: install typstyle using cargo-binstall in Containerfile, 4 files modified (Containerfile)

### Commit 29: [873ce1d](https://github.com/vig-os/devcontainer/commit/873ce1d7f330ce88be7b35c03cfd251fec1e59f8) by [c-vigo](https://github.com/c-vigo) on January 26, 2026 at 02:34 PM
feat: add typstyle linting configuration to pre-commit hooks, 11 files modified (assets/workspace/.pre-commit-config.yaml)

### Commit 30: [abbc511](https://github.com/vig-os/devcontainer/commit/abbc5110bae6ee32c4f70b4470c4aed363bc2b2c) by [c-vigo](https://github.com/c-vigo) on January 26, 2026 at 02:53 PM
docs: update readme, contribution and testing documentation, 220 files modified (CONTRIBUTE.md, README.md, TESTING.md, docs/templates/CONTRIBUTE.md.j2, docs/templates/README.md.j2, docs/templates/TESTING.md.j2)

### Commit 31: [151a0e2](https://github.com/vig-os/devcontainer/commit/151a0e2490b62fa16d181c88b3d3e6e9d66b68c7) by [c-vigo](https://github.com/c-vigo) on January 26, 2026 at 02:57 PM
chore: update CHANGELOG and prepare for release of 0.2.1, 34 files modified (CHANGELOG.md)
