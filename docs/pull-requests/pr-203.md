---
type: pull_request
state: closed (merged)
branch: bugfix/202-deterministic-detect-editor-cli-test â†’ feature/70-remote-devc-orchestration
created: 2026-02-25T12:03:55Z
updated: 2026-02-25T17:47:02Z
author: c-vigo
author_url: https://github.com/c-vigo
url: https://github.com/vig-os/devcontainer/pull/203
comments: 1
labels: none
assignees: none
milestone: none
projects: none
relationship: none
merged: 2026-02-25T17:46:59Z
synced: 2026-02-26T04:22:29.128Z
---

# [PR 203](https://github.com/vig-os/devcontainer/pull/203) fix: make detect_editor_cli no-editor case deterministic

## Description

Make the `detect_editor_cli` negative-path BATS test deterministic across host environments where `/usr/bin/code` may be present.

## Type of Change

- [ ] `feat` -- New feature
- [x] `fix` -- Bug fix
- [ ] `docs` -- Documentation only
- [ ] `chore` -- Maintenance task (deps, config, etc.)
- [ ] `refactor` -- Code restructuring (no behavior change)
- [ ] `test` -- Adding or updating tests
- [ ] `ci` -- CI/CD pipeline changes
- [ ] `build` -- Build system or dependency changes
- [ ] `revert` -- Reverts a previous commit
- [ ] `style` -- Code style (formatting, whitespace)

### Modifiers

- [ ] Breaking change (`!`) -- This change breaks backward compatibility

## Changes Made

- `tests/bats/devc-remote.bats`
  - Replace `PATH="/usr/bin:/bin"` assumption with a temp empty PATH directory.
  - Execute via `/bin/bash "$DEVC_REMOTE"` under `env -i` to avoid shebang/PATH lookup side effects.
  - Clean up temporary directory at test end.

## Changelog Entry

No changelog needed: this is an internal test determinism fix with no user-facing behavior change.

## Testing

- [x] Tests pass locally (`just test`)
- [ ] Manual testing performed (describe below)

### Manual Testing Details

N/A

## Checklist

- [x] My code follows the project's style guidelines
- [x] I have performed a self-review of my code
- [ ] I have commented my code, particularly in hard-to-understand areas
- [ ] I have updated the documentation accordingly (edit `docs/templates/`, then run `just docs`)
- [ ] I have updated `CHANGELOG.md` in the `[Unreleased]` section (and pasted the entry above)
- [x] My changes generate no new warnings or errors
- [x] I have added tests that prove my fix is effective or that my feature works
- [x] New and existing unit tests pass locally with my changes
- [ ] Any dependent changes have been merged and published

## Additional Notes

Validated with:
- `npx bats tests/bats/devc-remote.bats -f "detect_editor_cli fails when neither cursor nor code in PATH"`
- `npx bats tests/bats/devc-remote.bats`

Refs: #202



---
---

## Comments (1)

### [Comment #1](https://github.com/vig-os/devcontainer/pull/203#issuecomment-3958820127) by [@c-vigo](https://github.com/c-vigo)

_Posted on February 25, 2026 at 12:06 PM_

@gerchowl verify the tests still pass for you, if so you can merge and close issue #202

---
---

## Commits

### Commit 1: [9715885](https://github.com/vig-os/devcontainer/commit/97158853c7a72b6c18b0b9f8f59d251e6248381e) by [c-vigo](https://github.com/c-vigo) on February 25, 2026 at 11:59 AM
fix: make detect_editor_cli no-editor case deterministic, 7 files modified (tests/bats/devc-remote.bats)

### Commit 2: [0257640](https://github.com/vig-os/devcontainer/commit/0257640716baf401dfe9db1f0bc60ddefc3f2e49) by [gerchowl](https://github.com/gerchowl) on February 25, 2026 at 05:46 PM
Merge remote-tracking branch 'origin/feature/70-remote-devc-orchestration' into bugfix/202-deterministic-detect-editor-cli-test, 35 files modified (CHANGELOG.md, assets/workspace/.devcontainer/devcontainer.json, tests/test_integration.py)
