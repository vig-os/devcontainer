---
type: pull_request
state: closed (merged)
branch: bugfix/163-wrong-identity-tags → dev
created: 2026-02-23T23:07:39Z
updated: 2026-02-24T15:03:40Z
author: gerchowl
author_url: https://github.com/gerchowl
url: https://github.com/vig-os/devcontainer/pull/164
comments: 0
labels: none
assignees: none
milestone: none
projects: none
relationship: none
merged: 2026-02-24T15:03:28Z
synced: 2026-02-25T04:26:16.816Z
---

# [PR 164](https://github.com/vig-os/devcontainer/pull/164) fix: reject AI agent identity fingerprints in validate-commit-msg

## Description

Extend `validate-commit-msg` to actively reject commits containing AI agent identity fingerprints (Co-authored-by trailers, cursoragent, claude, codex, chatgpt, copilot). The commit-msg hook now blocks these patterns before any other validation.

Closes #163

## Type of Change

- [x] `fix` -- Bug fix

### Modifiers

- [ ] Breaking change (`!`) -- This change breaks backward compatibility

## Changes Made

- Added `_contains_agent_fingerprint()` to scan full commit message for blocklist patterns
- Blocklist: Co-authored-by, cursoragent, claude, codex, chatgpt, copilot (case-insensitive; agent names as whole words)
- Agent check runs first, before subject/body/Refs validation
- 6 new tests in `TestAgentFingerprints` (TDD)

## Changelog Entry

### Fixed

- **validate-commit-msg rejects AI agent identity fingerprints** ([#163](https://github.com/vig-os/devcontainer/issues/163))
  - Commit-msg hook now rejects commits containing Co-authored-by, cursoragent, claude, codex, chatgpt, copilot
  - Enforced before other validation; applies to full message including subject-only mode

## Testing

- [x] Tests pass locally (`uv run pytest packages/vig-utils/tests/test_validate_commit_msg.py` — 121 passed)
- [x] Manual testing: commit with `Co-authored-by: Cursor <cursoragent@cursor.com>` rejected

### Manual Testing Details

```bash
echo -e "feat: add x\n\nRefs: #163\n\nCo-authored-by: Cursor <cursoragent@cursor.com>" > /tmp/msg
uv run validate-commit-msg /tmp/msg
# Exit 1, error about agent fingerprint
```

## Checklist

- [x] My code follows the project's style guidelines
- [x] I have performed a self-review of my code
- [x] I have updated `CHANGELOG.md` in the `[Unreleased]` section
- [x] I have added tests that prove my fix is effective
- [x] New and existing unit tests pass locally

Refs: #163


---
---

## Commits

### Commit 1: [3bc77df](https://github.com/vig-os/devcontainer/commit/3bc77df0ebf184c46e2ca68cb2776b89ccc24f08) by [gerchowl](https://github.com/gerchowl) on February 23, 2026 at 11:06 PM
test: add agent fingerprint rejection tests for validate-commit-msg, 49 files modified (packages/vig-utils/tests/test_validate_commit_msg.py)

### Commit 2: [df58c35](https://github.com/vig-os/devcontainer/commit/df58c354c48f21397c3993684eb409e23271b8af) by [gerchowl](https://github.com/gerchowl) on February 23, 2026 at 11:07 PM
fix: reject AI agent identity fingerprints in validate-commit-msg, 33 files modified (CHANGELOG.md, packages/vig-utils/src/vig_utils/validate_commit_msg.py)

### Commit 3: [5372672](https://github.com/vig-os/devcontainer/commit/53726728088df855f9713ba027f38c58b8bb27da) by [gerchowl](https://github.com/gerchowl) on February 24, 2026 at 12:53 PM
fix: block cursor.com and 'Made with Cursor' branding in validate-commit-msg, 10 files modified (CHANGELOG.md, packages/vig-utils/src/vig_utils/validate_commit_msg.py, packages/vig-utils/tests/test_validate_commit_msg.py)

### Commit 4: [3e35a60](https://github.com/vig-os/devcontainer/commit/3e35a60236e5d0b86cfa4f201cc07df623a8a6a8) by [gerchowl](https://github.com/gerchowl) on February 24, 2026 at 01:01 PM
Merge branch 'dev' into bugfix/163-wrong-identity-tags, 2125 files modified
