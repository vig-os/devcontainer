---
type: pull_request
state: closed (merged)
branch: bugfix/176-gh-issues-ci-dedup → dev
created: 2026-02-24T13:02:34Z
updated: 2026-02-24T16:42:51Z
author: gerchowl
author_url: https://github.com/gerchowl
url: https://github.com/vig-os/devcontainer/pull/177
comments: 0
labels: none
assignees: gerchowl
milestone: none
projects: none
relationship: none
merged: 2026-02-24T16:42:49Z
synced: 2026-02-25T04:26:07.973Z
---

# [PR 177](https://github.com/vig-os/devcontainer/pull/177) fix(gh-issues): deduplicate CI status by check name (#176)

## Description

Fixes the `just gh-issues` PR table CI column showing incorrect status when checks are re-run. The `statusCheckRollup` from `gh pr list` includes all check runs (including re-runs), so a check that failed twice then succeeded would show red (✗ 1/3) instead of green (✓ 1/1).

This PR deduplicates `statusCheckRollup` by check name, keeping only the latest result (by `completedAt`), so the CI column matches what GitHub shows on the PR page.

## Type of Change

- [x] `fix` -- Bug fix
- [ ] `feat` -- New feature
- [ ] `docs` -- Documentation only
- [ ] `chore` -- Maintenance task (deps, config, etc.)
- [ ] `refactor` -- Code restructuring (no behavior change)
- [ ] `test` -- Adding or updating tests
- [ ] `ci` -- CI/CD pipeline changes
- [ ] `build` -- Build system or dependency changes
- [ ] `revert` -- Reverts a previous commit
- [ ] `style` -- Code style (formatting, whitespace)

### Modifiers

- [ ] Breaking change (`!`) -- This change breaks backward compatibility

## Changes Made

- `scripts/gh_issues.py`: Add `_dedupe_status_checks()` helper; call it at start of `_format_ci_status()`
- `tests/test_gh_issues.py`: Add two tests for dedup (by completedAt, fallback when missing)
- `CHANGELOG.md`: Add Fixed entry for #176

## Changelog Entry

### Fixed

- **gh-issues CI status deduplicates re-run checks** ([#176](https://github.com/vig-os/devcontainer/issues/176))
  - Deduplicate `statusCheckRollup` by check name, keeping only the latest result (by `completedAt`)
  - CI column now matches GitHub PR page when checks are re-run

## Testing

- [x] Tests pass locally (`uv run pytest tests/test_gh_issues.py -v`)
- [ ] Manual testing performed (describe below)

### Manual Testing Details

N/A — unit tests cover the dedup logic.

## Checklist

- [x] My code follows the project's style guidelines
- [x] I have performed a self-review of my code
- [x] I have commented my code, particularly in hard-to-understand areas
- [ ] I have updated the documentation accordingly (edit `docs/templates/`, then run `just docs`)
- [x] I have updated `CHANGELOG.md` in the `[Unreleased]` section (and pasted the entry above)
- [x] My changes generate no new warnings or errors
- [x] I have added tests that prove my fix is effective or that my feature works
- [x] New and existing unit tests pass locally with my changes
- [x] Any dependent changes have been merged and published

## Additional Notes

Design and implementation plan posted as comments on #176.

Refs: #176



---
---

## Commits

### Commit 1: [f89723b](https://github.com/vig-os/devcontainer/commit/f89723bec37609f74b1b678761ebc57fb50887f9) by [gerchowl](https://github.com/gerchowl) on February 24, 2026 at 01:02 PM
fix(gh-issues): deduplicate CI status by check name, 66 files modified (CHANGELOG.md, scripts/gh_issues.py, tests/test_gh_issues.py)

### Commit 2: [0a6242c](https://github.com/vig-os/devcontainer/commit/0a6242c5fe69e77a5a25f5305be583d53579f749) by [gerchowl](https://github.com/gerchowl) on February 24, 2026 at 03:21 PM
ci(test-project): include gh_issues tests in coverage run, 1 file modified (.github/actions/test-project/action.yml)

### Commit 3: [9eb2794](https://github.com/vig-os/devcontainer/commit/9eb2794a2df07e6e12cb1a318dce1709ce51eea0) by [gerchowl](https://github.com/gerchowl) on February 24, 2026 at 03:23 PM
Merge branch 'dev' into bugfix/176-gh-issues-ci-dedup, 90 files modified (CHANGELOG.md, packages/vig-utils/src/vig_utils/validate_commit_msg.py, packages/vig-utils/tests/test_validate_commit_msg.py)

### Commit 4: [cbe2e88](https://github.com/vig-os/devcontainer/commit/cbe2e8833afd1ce79e19025a83111c62c824b063) by [gerchowl](https://github.com/gerchowl) on February 24, 2026 at 04:42 PM
Merge branch 'dev' into bugfix/176-gh-issues-ci-dedup, 96 files modified (CHANGELOG.md, assets/workspace/.devcontainer/justfile.worktree, justfile.worktree, scripts/derive-branch-summary.sh, scripts/gh_issues.py, tests/bats/worktree.bats, tests/test_gh_issues.py)
