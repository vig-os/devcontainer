---
type: pull_request
state: open
branch: bugfix/159-rich-missing-dependency â†’ dev
created: 2026-02-24T15:39:30Z
updated: 2026-02-26T12:01:56Z
author: gerchowl
author_url: https://github.com/gerchowl
url: https://github.com/vig-os/devcontainer/pull/180
comments: 1
labels: none
assignees: none
milestone: none
projects: none
relationship: none
synced: 2026-02-27T04:19:10.953Z
---

# [PR 180](https://github.com/vig-os/devcontainer/pull/180) fix(deps): use pyproject.toml as SSoT for devcontainer tools

## Summary

- Add `devcontainer` dependency group to `pyproject.toml` (rich, pre-commit, ruff, pip-licenses)
- Container build installs from pyproject via `uv export --only-group devcontainer`
- Add `rich` to workspace template dev group; switch `justfile.gh` to `uv run python3`
- `prepare-build.sh` copies `pyproject.toml` and `uv.lock` to build context

## Test plan

- [x] `uv sync` on a clean local checkout installs `rich`
- [x] `just gh-issues` succeeds locally (outside devcontainer)
- [x] `just gh-issues` continues to work inside the devcontainer
- [x] Container build succeeds with devcontainer dependency group

Closes #159


---
---

## Comments (1)

### [Comment #1](https://github.com/vig-os/devcontainer/pull/180#issuecomment-3966180028) by [@c-vigo](https://github.com/c-vigo)

_Posted on February 26, 2026 at 12:01 PM_

### Problem
What should `gh-issues` do if there is no upstream repo set?

### Steps
1. Checkout this branch and build `dev` version with `just build no_cache`
2. Create fresh project in an empty directory with `~/Documents/vigOS/devcontainer/install.sh ./ --version dev --skip-pull`
3. Open project as a devcontainer
4. Run `just gh-issues`

### Error
```bash
just gh-issues

uv run python /workspace/tmp/.devcontainer/scripts/gh_issues.py
      Built tmp @ file:///workspace/tmp
Installed 1 package in 1ms
Traceback (most recent call last):
  File "/workspace/tmp/.devcontainer/scripts/gh_issues.py", line 618, in <module>
    sys.exit(main())
             ^^^^^^
  File "/workspace/tmp/.devcontainer/scripts/gh_issues.py", line 534, in main
    issues = _fetch_issues()
             ^^^^^^^^^^^^^^^
  File "/workspace/tmp/.devcontainer/scripts/gh_issues.py", line 17, in _fetch_issues
    result = subprocess.run(
             ^^^^^^^^^^^^^^^
  File "/root/.local/share/uv/python/cpython-3.12-linux-x86_64-gnu/lib/python3.12/subprocess.py", line 571, in run                                                                                                            
    raise CalledProcessError(retcode, process.args,
subprocess.CalledProcessError: Command '['gh', 'issue', 'list', '--state', 'open', '--limit', '200', '--json', 'number,title,state,assignees,labels,milestone']' returned non-zero exit status 1.                             
error: Recipe `gh-issues` failed on line 10 with exit code 1
```

### Proposed Solution
Fail gracefully after checking upstream repo is not set / does not exist.

### Related
More generally for network access: #209

---

