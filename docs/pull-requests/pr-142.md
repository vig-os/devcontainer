---
type: pull_request
state: closed (merged)
branch: feature/133-pr-solve-skill → dev
created: 2026-02-21T21:14:42Z
updated: 2026-02-21T22:01:46Z
author: gerchowl
author_url: https://github.com/gerchowl
url: https://github.com/vig-os/devcontainer/pull/142
comments: 0
labels: none
assignees: gerchowl
milestone: none
projects: none
relationship: none
merged: 2026-02-21T22:01:43Z
synced: 2026-02-22T04:23:30.840Z
---

# [PR 142](https://github.com/vig-os/devcontainer/pull/142) feat(agent): add pr_solve skill and skill naming enforcement

## Description

Add the `pr_solve` skill — a single entry point that diagnoses all PR failures (CI, review feedback, merge conflicts), presents a structured diagnosis, plans fixes with user approval, and executes them with TDD discipline.

Also introduces a pre-commit hook and BATS test suite to enforce the new underscore-based skill directory naming convention, and expands the TDD scenario checklist with three new categories.

Closes #133

## Type of Change

- [x] `feat` -- New feature
- [x] `test` -- Adding or updating tests
- [x] `docs` -- Documentation only

## Changes Made

### pr_solve skill
- `.cursor/skills/pr_solve/SKILL.md` — 6-step workflow: identify PR, gather problems (CI/reviews/merge state), present diagnosis, plan fixes, execute with TDD, verify via ci_check
- Registered in `CLAUDE.md` command table
- Workspace copy synced via `sync_manifest.py`

### Skill naming enforcement
- `scripts/check-skill-names.sh` — validates skill directory names match `[a-z0-9][a-z0-9_-]*`
- Pre-commit hook `check-skill-names` in `.pre-commit-config.yaml` — triggers on changes under `.cursor/skills/`
- `tests/bats/skill-naming.bats` — 12 BATS tests covering valid names, invalid names (colons, dots, uppercase, spaces), multiple violations, empty dirs, real repo validation, and a canary test that injects a bad name into the real `.cursor/skills/` to prove the guard catches it

### TDD checklist expansion
- `.cursor/rules/tdd.mdc` — added canary, idempotency, and concurrency to the test scenario checklist

## Changelog Entry

### Added

- **pr_solve skill — diagnose PR failures, plan fixes, execute** ([#133](https://github.com/vig-os/devcontainer/issues/133))
  - Single entry point that gathers CI failures, review feedback, and merge state into a consolidated diagnosis
  - Presents diagnosis for approval before any fixes, plans fixes using design_plan conventions, executes with TDD discipline
  - Pre-commit hook `check-skill-names` enforces `[a-z0-9][a-z0-9_-]*` naming for skill directories
  - BATS test suite with canary test that injects a bad name into the real repo
  - TDD scenario checklist expanded with canary, idempotency, and concurrency categories

## Testing

- [x] Tests pass locally (`just test-bats`)
- [x] All 12 BATS tests pass including canary test
- [x] Pre-commit hook `check-skill-names` passes on real repo
- [x] All pre-commit hooks pass on every commit

### Manual Testing Details

- Ran `npx bats tests/bats/skill-naming.bats` — 12/12 pass
- Ran `scripts/check-skill-names.sh .cursor/skills` — exits 0
- Verified canary test creates `bad:canary` dir, checker rejects it, dir is cleaned up

## Checklist

- [x] My code follows the project's style guidelines
- [x] I have performed a self-review of my code
- [x] I have commented my code, particularly in hard-to-understand areas
- [x] I have updated `CHANGELOG.md` in the `[Unreleased]` section (and pasted the entry above)
- [x] My changes generate no new warnings or errors
- [x] I have added tests that prove my fix is effective or that my feature works
- [x] New and existing unit tests pass locally with my changes

Refs: #133



---
---

## Commits

### Commit 1: [966a13f](https://github.com/vig-os/devcontainer/commit/966a13ff44894ca50495ca1f5a5d027a65f2052f) by [gerchowl](https://github.com/gerchowl) on February 21, 2026 at 09:04 PM
feat(agent): add pr_solve skill for diagnosing and fixing PR failures, 290 files modified (.cursor/skills/pr_solve/SKILL.md, CHANGELOG.md, CLAUDE.md, assets/workspace/.cursor/skills/pr_solve/SKILL.md)

### Commit 2: [e6d51b3](https://github.com/vig-os/devcontainer/commit/e6d51b33d996783953a01c965a64d4020e6a19c1) by [gerchowl](https://github.com/gerchowl) on February 21, 2026 at 09:05 PM
test: add failing BATS tests for skill directory naming convention, 124 files modified (tests/bats/skill-naming.bats)

### Commit 3: [d11052f](https://github.com/vig-os/devcontainer/commit/d11052fe9a09c61c73af054876f77b48761d3fde) by [gerchowl](https://github.com/gerchowl) on February 21, 2026 at 09:06 PM
feat(agent): add pre-commit hook to enforce skill directory naming convention, 55 files modified (.pre-commit-config.yaml, assets/workspace/.pre-commit-config.yaml, scripts/check-skill-names.sh)

### Commit 4: [25c55b1](https://github.com/vig-os/devcontainer/commit/25c55b12d10e58e52439e617396aad25987bccf9) by [gerchowl](https://github.com/gerchowl) on February 21, 2026 at 09:08 PM
test: add canary test injecting bad skill name into real repo, 12 files modified (tests/bats/skill-naming.bats)

### Commit 5: [08eafe1](https://github.com/vig-os/devcontainer/commit/08eafe109e32ff627fd6e01b0119d18a029e6c47) by [gerchowl](https://github.com/gerchowl) on February 21, 2026 at 09:09 PM
docs: add canary test category to TDD scenario checklist, 2 files modified (.cursor/rules/tdd.mdc, assets/workspace/.cursor/rules/tdd.mdc)

### Commit 6: [d9d13e0](https://github.com/vig-os/devcontainer/commit/d9d13e0716a319f540455f896362b25e2a10a78f) by [gerchowl](https://github.com/gerchowl) on February 21, 2026 at 09:12 PM
docs: add idempotency and concurrency to TDD scenario checklist, 8 files modified (.cursor/rules/tdd.mdc, assets/workspace/.cursor/rules/tdd.mdc)

### Commit 7: [c8d3ea2](https://github.com/vig-os/devcontainer/commit/c8d3ea299841ddb6d12e045c2d584903ce19fbb9) by [gerchowl](https://github.com/gerchowl) on February 21, 2026 at 09:13 PM
docs: update CHANGELOG with pre-commit hook and TDD checklist additions, 3 files modified (CHANGELOG.md)

### Commit 8: [695da35](https://github.com/vig-os/devcontainer/commit/695da35a3b7fb86a15fb45797f0c6aac9b8f032b) by [gerchowl](https://github.com/gerchowl) on February 21, 2026 at 09:40 PM
docs: regenerate SKILL_PIPELINE.md with pr_solve entry, 5 files modified (CONTRIBUTE.md, README.md, docs/SKILL_PIPELINE.md)

### Commit 9: [3e2800b](https://github.com/vig-os/devcontainer/commit/3e2800b7a7266672b87aa1c7cee887a18ea5c94f) by [gerchowl](https://github.com/gerchowl) on February 21, 2026 at 09:43 PM
docs: add pr_solve to skill pipeline diagram, 12 files modified (docs/SKILL_PIPELINE.md, docs/templates/SKILL_PIPELINE.md.j2)
