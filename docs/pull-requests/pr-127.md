---
type: pull_request
state: closed (merged)
branch: chore/123-fix-github-workflow-config â†’ dev
created: 2026-02-20T16:09:09Z
updated: 2026-02-20T16:22:02Z
author: c-vigo
author_url: https://github.com/c-vigo
url: https://github.com/vig-os/devcontainer/pull/127
comments: 0
labels: none
assignees: c-vigo
milestone: none
projects: none
relationship: none
merged: 2026-02-20T16:21:59Z
synced: 2026-02-20T16:48:57.168Z
---

# [PR 127](https://github.com/vig-os/devcontainer/pull/127) ci: correct workflow bugs and hardcoded values (#123)

## Description

Fix workflow bugs and hardcoded values identified during a thorough review of the `.github/` directory. Also applies repo setting improvements (deleteBranchOnMerge, wiki, sha_pinning_required) via the GitHub API.

## Type of Change

- [x] `ci` -- CI/CD pipeline changes

## Changes Made

**Workflow fixes (code):**

- `security-scan.yml`: Add missing `release_date` and `build_timestamp` outputs to the version step (were undefined, passing empty strings to the build-image action)
- `scorecard.yml`: Update `codeql-action/upload-sarif` from v3 to v4 SHA for consistency with all other workflows
- `post-release.yml`: Fix commit message `Refs:` line that inherited 10 spaces of YAML indentation (use `printf` instead of embedded newline)
- `ci.yml`: Replace hardcoded `vig-os/devcontainer` URL with `$GITHUB_REPOSITORY`
- `release.yml`: Replace undeclared `release` label in rollback issue with `area:ci` (from label taxonomy)
- `build-image/action.yml`: Replace hardcoded OCI `source` label URL with `${{ github.server_url }}/${{ github.repository }}`

**Repo settings (applied via API, not in diff):**

- Enable `deleteBranchOnMerge` -- head branches auto-delete after merge
- Disable wiki -- project uses docs-as-code
- Enable `sha_pinning_required` -- enforce SHA-pinned actions

## Changelog Entry

No changelog needed -- purely internal CI configuration fixes with no user-visible impact.

## Testing

- [x] Tests pass locally (`just test`)
- [x] Manual testing performed (describe below)

### Manual Testing Details

- All pre-commit hooks pass (yamllint, check-yaml, check-action-pins, typos, validate-commit-msg)
- Changes are YAML-only workflow config; runtime validation requires actual CI runs on the PR

## Checklist

- [x] My code follows the project's style guidelines
- [x] I have performed a self-review of my code
- [x] I have commented my code, particularly in hard-to-understand areas
- [ ] I have updated the documentation accordingly (edit `docs/templates/`, then run `just docs`)
- [ ] I have updated `CHANGELOG.md` in the `[Unreleased]` section (and pasted the entry above)
- [x] My changes generate no new warnings or errors
- [ ] I have added tests that prove my fix is effective or that my feature works
- [x] New and existing unit tests pass locally with my changes
- [x] Any dependent changes have been merged and published

## Additional Notes

Repo settings (S1-S3) were applied via `gh api` during implementation and are not reflected in the diff. S4 (production environment for release publish) was deferred as it would require workflow changes to reference the environment.

W6 (ARM runner name verification) and W7 (prepare-release.yml Refs: line) were flagged as verify-only / by-design in the implementation plan and skipped.

Refs: #123



---
---

## Commits

### Commit 1: [4f18c45](https://github.com/vig-os/devcontainer/commit/4f18c4593022ff0964f87bf1fc3731ef96eabdc2) by [c-vigo](https://github.com/c-vigo) on February 20, 2026 at 03:57 PM
ci: correct workflow bugs and hardcoded values, 16 files modified
