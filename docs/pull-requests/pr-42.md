---
type: pull_request
state: closed (merged)
branch: feature/34-rename-venv-container-creation → feature/37-automate-standardize-repository-setup
created: 2026-02-03T12:55:55Z
updated: 2026-02-03T12:58:01Z
author: c-vigo
author_url: https://github.com/c-vigo
url: https://github.com/vig-os/devcontainer/pull/42
comments: 0
labels: none
assignees: c-vigo
milestone: none
projects: none
relationship: none
merged: 2026-02-03T12:57:44Z
synced: 2026-02-18T08:56:57.338Z
---

# [PR 42](https://github.com/vig-os/devcontainer/pull/42) feat: rename venv prompt to project name on container creation (#34)

# Pull Request

## Description

Renames the virtual environment prompt from "template-project" to the project short name when the devcontainer is created. The venv in the image stays at `/root/assets/workspace/.venv`; the post-create script runs `sed` to replace "template-project" with `{{SHORT_NAME}}` in `.venv/bin/activate` so the shell prompt shows the project name. Also fixes pytest collecting tests from `tests/tmp/` (integration workspace dirs), which caused collection errors.

## Related Issue(s)

Closes #34
Fixes bug in #36

## Type of Change

- [x] Bug fix (non-breaking change which fixes an issue)
- [x] New feature (non-breaking change which adds functionality)
- [ ] Breaking change (fix or feature that would cause existing functionality to not work as expected)
- [ ] Documentation update
- [ ] Refactoring (no functional changes)
- [ ] Test updates

## Changes Made

- **post-create.sh** — Add `sed -i 's/template-project/{{SHORT_NAME}}/g' /root/assets/workspace/.venv/bin/activate` so the venv prompt is updated on first container creation.
- **test_integration.py** — Add `test_venv_prompt_name` in `TestDevContainerUserConf`: uses `devcontainer_up`, runs `devcontainer exec ... cat /root/assets/workspace/.venv/bin/activate`, asserts "template-project" is not in the output.
- **pyproject.toml** — Add `norecursedirs = "tmp"` so pytest does not collect tests from `tests/tmp/` (integration test workspace dirs), avoiding `ModuleNotFoundError: tests.test_example`.
- **CHANGELOG.md** — Document commit message standardization (#36), venv prompt renaming (#34), and pytest tmp exclusion under Unreleased.
- **test_integration.py** — Fix existing commit message in test to match new commit message standard (from #36).

## Testing

- [x] Tests pass locally (`just test`)

## Checklist

- [x] My code follows the project's style guidelines
- [x] I have performed a self-review of my code
- [x] I have commented my code, particularly in hard-to-understand areas
- [x] I have updated the documentation accordingly (README.md, CONTRIBUTE.md, etc.)
- [x] I have updated the CHANGELOG.md in the `[Unreleased]` section
- [x] My changes generate no new warnings or errors
- [x] I have added tests that prove my fix is effective or that my feature works
- [x] New and existing unit tests pass locally with my changes
- [x] Any dependent changes have been merged and published



---
---

## Commits

### Commit 1: [0ab7dba](https://github.com/vig-os/devcontainer/commit/0ab7dba5517a62264e17e27d3160b80cf5c8ebd2) by [c-vigo](https://github.com/c-vigo) on February 3, 2026 at 10:44 AM
fix: replace commit message to match new standard, 2 files modified (tests/test_integration.py)

### Commit 2: [77efb12](https://github.com/vig-os/devcontainer/commit/77efb12a4e68d10b32dce6f9faeb1d6c842abe4d) by [c-vigo](https://github.com/c-vigo) on February 3, 2026 at 10:46 AM
test: add red test for virtual environment prompt name, 40 files modified (tests/test_integration.py)

### Commit 3: [904d8dc](https://github.com/vig-os/devcontainer/commit/904d8dc4000642b95cefd06c0fd68471a88902e2) by [c-vigo](https://github.com/c-vigo) on February 3, 2026 at 12:43 PM
feat: update post-create script to set virtual environment prompt, 3 files modified (assets/workspace/.devcontainer/scripts/post-create.sh)

### Commit 4: [f82e5b8](https://github.com/vig-os/devcontainer/commit/f82e5b8d8f7f0459d5d3c45ce9fd31b27fc21553) by [c-vigo](https://github.com/c-vigo) on February 3, 2026 at 12:43 PM
fix: exclude 'tmp' directory from test collection in pyproject.toml, 2 files modified (pyproject.toml)

### Commit 5: [6e9df15](https://github.com/vig-os/devcontainer/commit/6e9df1572488105fcedc2e722c8ef204a391709b) by [c-vigo](https://github.com/c-vigo) on February 3, 2026 at 12:50 PM
docs: update CHANGELOG, 21 files modified (CHANGELOG.md)
