---
version: '3.8'

services:
  devcontainer:
    image: ghcr.io/vig-os/devcontainer:{{IMAGE_TAG}}
    volumes:
      # Mount the project folder to a subdirectory of workspace
      - ..:/workspace/{{SHORT_NAME}}:cached
    environment:
      # Override default paths to match project subdirectory structure
      - PRE_COMMIT_HOME=/workspace/{{SHORT_NAME}}/.pre-commit-cache
    # Keep container running for VS Code to attach
    command: sleep infinity
    # Use root user (default from image)
    user: root
    # Keep stdin open and allocate a pseudo-TTY for interactive use
    stdin_open: true
    tty: true
