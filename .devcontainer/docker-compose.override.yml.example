# docker-compose.override.yml.example
#
# User-specific overrides. Docker Compose automatically merges this with docker-compose.yml.
# This file is gitignored - your settings survive upgrades via init-workspace.sh --force.
#
# Usage:
#   1. Copy: cp docker-compose.override.yml.example docker-compose.override.yml
#   2. Uncomment and modify sections below for your system
#   3. Rebuild your devcontainer (Cmd/Ctrl+Shift+P -> "Rebuild Container")
#
# Find your UID: id -u
# Find podman socket: podman machine inspect podman-machine-default --format '{{.ConnectionInfo.PodmanSocket.Path}}'

services:
  devcontainer:
    volumes:
      # ============================================================
      # PODMAN SOCKET MOUNT (required for sidecars / container builds)
      # ============================================================
      #
      # Uncomment ONE of the following based on your OS:
      #
      # === macOS (Podman in VM) ===
      # The path is INSIDE the Podman VM, not on macOS host!
      # Common UIDs: 501 (default macOS user)
      #
      # - /run/user/501/podman/podman.sock:/var/run/docker.sock:Z
      #
      # === Linux ===
      # Common UIDs: 1000 (default Linux user)
      #
      # - /run/user/1000/podman/podman.sock:/var/run/docker.sock:Z
      #
      # === Docker Desktop (macOS or Linux) ===
      #
      # - /var/run/docker.sock:/var/run/docker.sock

      # ============================================================
      # ADDITIONAL PROJECT MOUNTS
      # ============================================================
      #
      # Example: Mount a sibling project
      # - ../other-project:/workspace/other-project:cached
      #
      # Example: Mount a shared library folder
      # - ~/shared-libs:/workspace/shared:cached
      #
      # Example: Mount read-only reference docs
      # - ~/reference-docs:/workspace/docs:ro

  # ============================================================
  # SIDECAR CONTAINERS (optional)
  # ============================================================
  # Add builder sidecars here. They share the network and workspace.
  # See: https://github.com/vig-os/devcontainer for sidecar examples.
  #
  # rust-builder:
  #   container_name: rust-builder
  #   image: rust:1.75-slim
  #   volumes:
  #     - ..:/workspace/devcontainer:cached
  #   command: sleep infinity
  #   networks:
  #     - default

# Uncomment if adding sidecars that need shared volumes
# volumes:
#   build-artifacts:
